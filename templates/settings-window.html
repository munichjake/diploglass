<form class="fr-settings">
    <div class="fr-form-group">
        <label class="fr-section-header">
            <i class="fas fa-layer-group"></i>
            {{localize "DIPLOGLASS.Settings.ReputationLevels"}}
        </label>
        <p class="fr-form-hint">{{localize "DIPLOGLASS.Settings.ReputationLevelsHint"}}</p>
    </div>

    <div class="fr-reputation-levels-container">
        <div class="fr-levels-controls">
            <button type="button" class="fr-add-level">
                <i class="fas fa-plus"></i> {{localize "DIPLOGLASS.Settings.AddLevel"}}
            </button>
            <button type="button" class="fr-reset-levels">
                <i class="fas fa-undo"></i> {{localize "DIPLOGLASS.Settings.ResetToDefault"}}
            </button>
        </div>

        <div class="fr-reputation-levels-list">
            <div class="fr-level-headers">
                <span>{{localize "DIPLOGLASS.Settings.LevelValue"}}</span>
                <span>{{localize "DIPLOGLASS.Settings.LevelKey"}}</span>
                <span>{{localize "DIPLOGLASS.Settings.LevelLabel"}}</span>
                <span>{{localize "DIPLOGLASS.Settings.LevelColor"}}</span>
                <span>{{localize "DIPLOGLASS.Settings.Controls"}}</span>
            </div>

            {{#each levels as |level index|}}
            <div class="fr-reputation-level-item">
                <input type="number" name="level-value-{{index}}" value="{{level.value}}" step="1" required>
                <input type="text" name="level-key-{{index}}" value="{{level.key}}" required pattern="[a-zA-Z0-9_]+">
                <input type="text" name="level-label-{{index}}" value="{{level.label}}" required>
                <input type="color" name="level-color-{{index}}" value="{{level.color}}" required>
                <div class="fr-level-controls">
                    <button type="button" class="fr-level-up" title="{{localize 'DIPLOGLASS.Settings.MoveUp'}}">
                        <i class="fas fa-arrow-up"></i>
                    </button>
                    <button type="button" class="fr-level-down" title="{{localize 'DIPLOGLASS.Settings.MoveDown'}}">
                        <i class="fas fa-arrow-down"></i>
                    </button>
                    <button type="button" class="fr-delete-level" title="{{localize 'DIPLOGLASS.Settings.Delete'}}">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            </div>
            {{else}}
            <div class="fr-no-levels">
                <p>Keine Reputation-Levels vorhanden. Klicken Sie auf "Standardwerte wiederherstellen" oder "Stufe hinzufï¿½gen".</p>
            </div>
            {{/each}}
        </div>

        <div class="fr-level-preview">
            <h4>{{localize "DIPLOGLASS.Settings.Preview"}}</h4>
            <div class="fr-preview-levels">
                {{#each levels as |level|}}
                <div class="fr-preview-level" style="background-color: {{level.color}};">
                    {{level.label}} ({{level.value}})
                </div>
                {{/each}}
            </div>
        </div>
    </div>

    <div class="fr-form-buttons">
        <button type="submit" class="fr-save-btn">
            <i class="fas fa-save"></i> {{localize "DIPLOGLASS.Save"}}
        </button>
        <button type="button" class="fr-cancel-btn" onclick="this.closest('.app').querySelector('.header-button.close').click()">
            <i class="fas fa-times"></i> {{localize "DIPLOGLASS.Cancel"}}
        </button>
    </div>
</form>