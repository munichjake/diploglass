<div class="faction-config-form">
    <div class="form-group">
        <label for="name">{{localize "DIPLOGLASS.FactionName"}}:</label>
        <input type="text" name="name" id="name" value="{{faction.name}}" required>
    </div>

    <div class="form-group">
        <label for="icon">{{localize "DIPLOGLASS.FactionIcon"}}:</label>
        <div class="form-row icon-picker-row">
            <div class="icon-preview">
                {{#if faction.icon}}
                    <img src="{{faction.icon}}" alt="Faction Icon">
                {{else}}
                    <i class="fas fa-flag"></i>
                {{/if}}
            </div>
            <input type="text" name="icon" id="icon" value="{{faction.icon}}" placeholder="icons/svg/mystery-man.svg">
            <button type="button" class="icon-picker-btn" data-action="browseIcon" title="{{localize "DIPLOGLASS.BrowseIcon"}}">
                <i class="fas fa-folder-open"></i>
            </button>
            <button type="button" class="icon-clear-btn" data-action="clearIcon" title="{{localize "DIPLOGLASS.ClearIcon"}}">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <p class="form-hint">{{localize "DIPLOGLASS.FactionIconHint"}}</p>
    </div>

    <div class="form-group">
        <label for="journalId">{{localize "DIPLOGLASS.LinkedJournal"}}:</label>
        <select name="journalId" id="journalId">
            <option value="">-- {{localize "DIPLOGLASS.NoJournal"}} --</option>
            {{#each journals as |journal|}}
            <option value="{{journal.id}}" {{#if (eq journal.id ../faction.journalId)}}selected{{/if}}>
                {{journal.name}}
            </option>
            {{/each}}
        </select>
    </div>

    <div class="form-group">
        <label for="rollTableId">{{localize "DIPLOGLASS.RollTable"}}:</label>
        <div class="form-row">
            <select name="rollTableId" id="rollTableId">
                <option value="">-- {{localize "DIPLOGLASS.NoRollTable"}} --</option>
                {{#each rollTables as |table|}}
                <option value="{{table.id}}" {{#if (eq table.id ../faction.rollTableId)}}selected{{/if}}>
                    {{table.name}}
                </option>
                {{/each}}
            </select>
            <button type="button" class="create-table-btn" data-action="createRollTable" title="{{localize "DIPLOGLASS.CreateRollTable"}}">
                <i class="fas fa-plus"></i>
            </button>
        </div>
        <p class="form-hint">{{localize "DIPLOGLASS.RollTableHint"}}</p>
    </div>

    <div class="form-group">
        <label for="steps">{{localize "DIPLOGLASS.Steps"}}:</label>
        <input type="number" name="steps" id="steps"
               value="{{faction.steps}}"
               min="3" max="21" step="2" required>
        <p class="form-hint">{{localize "DIPLOGLASS.StepsHint"}}</p>
    </div>

    <div class="form-group checkbox-group">
        <label for="startAtNeutral">
            <input type="checkbox" name="startAtNeutral" id="startAtNeutral"
                   {{#if faction.startAtNeutral}}checked{{/if}}>
            {{localize "DIPLOGLASS.StartAtNeutral"}}
        </label>
        <p class="form-hint">{{localize "DIPLOGLASS.StartAtNeutralHint"}}</p>
    </div>

    <div class="form-group checkbox-group">
        <label for="usePerPlayerReputation">
            <input type="checkbox" name="usePerPlayerReputation" id="usePerPlayerReputation"
                   {{#if faction.usePerPlayerReputation}}checked{{/if}}>
            {{localize "DIPLOGLASS.UsePerPlayerMode"}}
        </label>
        <p class="form-hint">{{localize "DIPLOGLASS.UsePerPlayerModeHint"}}</p>
    </div>

    <div class="form-buttons">
        <button type="submit" class="save-btn">
            <i class="fas fa-save"></i> {{localize "DIPLOGLASS.Save"}}
        </button>
        <button type="button" class="cancel-btn" data-action="cancelConfig">
            <i class="fas fa-times"></i> {{localize "DIPLOGLASS.Cancel"}}
        </button>
    </div>
</div>